<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø¨Ø·Ø§Ù‚Ø© ØªÙ‡Ù†Ø¦Ø© - Ø¹ÙŠÙ† Ø§Ù„Ø®ÙŠØ§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù…ÙŠØ©</title>

  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --gold:#AD8252;
      --dark:#2b2b2b;
      --bg:#f4efe8;
      --card:#ffffff;
      --border:#e6dfd6;
    }
    body{
      margin:0;
      font-family:Tajawal, Arial, sans-serif;
      background:var(--bg);
      color:var(--dark);
    }
    .wrap{
      max-width:1000px;
      margin:0 auto;
      padding:18px;
    }
    h3{
      margin:6px 0 10px;
      font-size:24px;
      color:var(--dark);
    }
    p{
      margin:0 0 14px;
      color:#444;
    }
    .box{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      padding:16px;
      display:grid;
      grid-template-columns:320px 1fr;
      gap:16px;
      align-items:start;
    }
    label{
      display:block;
      margin:10px 0 6px;
      font-weight:700;
      color:var(--dark);
    }
    input{
      width:100%;
      padding:12px;
      border-radius:12px;
      border:1px solid #e1d9cf;
      outline:none;
      font-size:16px;
      background:#faf8f5;
      color:var(--dark);
    }
    button{
      width:100%;
      margin-top:12px;
      padding:12px 14px;
      border-radius:12px;
      border:0;
      cursor:pointer;
      font-weight:700;
      font-size:16px;
      background:var(--gold);
      color:#111;
    }
    .note{
      margin-top:10px;
      font-size:12px;
      color:#666;
      line-height:1.6;
    }
    .preview{
      display:grid;
      justify-items:center;
      gap:12px;
    }
    canvas{
      width:100%;
      max-width:480px;
      height:auto;
      border-radius:16px;
      border:1px solid var(--border);
      background:#fff;
    }
    /* Arrow Controls (Gold + Dark Gray) */
    .controls{
      margin-top:10px;
      display:grid;
      gap:6px;
      justify-items:center;
      width:100%;
      max-width:480px;
      padding:10px;
      border-radius:14px;
      border:1px solid var(--border);
      background:#faf8f5;
    }
    .arrow-row{
      display:flex;
      gap:10px;
      justify-content:center;
    }
    .arrow-btn{
      background:var(--dark);
      color:#fff;
      width:48px;
      height:48px;
      border-radius:12px;
      border:none;
      cursor:pointer;
      font-size:18px;
      font-weight:700;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }
    .reset-btn{
      background:var(--gold);
      color:#111;
      width:auto;
      padding:10px 16px;
      border-radius:12px;
      border:none;
      cursor:pointer;
      font-weight:700;
      font-size:14px;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }
    @media (max-width: 900px){
      .box{ grid-template-columns:1fr; }
      canvas{ max-width:100%; }
      .controls{ max-width:100%; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <h3>Ø¥Ù‡Ø¯Ø§Ø¡ Ù…Ù† Ø´Ø±ÙƒØ© Ø¹ÙŠÙ† Ø§Ù„Ø®ÙŠØ§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù…ÙŠØ© âœ¨ ØµÙ…Ù‘Ù… Ø¨Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©</h3>
    <p>  Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ ğŸ¤ğŸŒ™ Ø¹Ø¯Ù‘Ù„ Ù…ÙƒØ§Ù†Ù‡ Ø¨Ø§Ù„Ø£Ø³Ù‡Ù… Ø¥Ø°Ø§ Ø§Ø­ØªØ¬ØªØŒ ÙˆØ¨Ø¹Ø¯Ù‡Ø§ Ø­Ù…Ù‘Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©.  </p>

    <div class="box">
      <div>
        <label for="name">Ø§Ù„Ø§Ø³Ù…</label>
        <input id="name" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§" autocomplete="name" />

        <button type="button" id="downloadBtn">ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</button>

        <div class="note">
          ğŸ“Œ Ø§Ù„Ø§Ø³Ù… Ø³ÙŠØ¸Ù‡Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø· Ø£Ø³ÙÙ„ Ø¹Ø¨Ø§Ø±Ø© Ø§Ù„ØªÙ‡Ù†Ø¦Ø©. ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„Ø£Ø³Ù‡Ù….
        </div>
      </div>

      <div class="preview">
        <!-- Canvas size MUST match your image size -->
        <canvas id="imageCanvas" width="2160" height="3840"></canvas>

        <!-- Arrows + Reset -->
        <div class="controls">
          <div>
            <button type="button" class="arrow-btn" id="upBtn">â†‘</button>
          </div>
          <div class="arrow-row">
            <button type="button" class="arrow-btn" id="leftBtn">â†</button>
            <button type="button" class="arrow-btn" id="rightBtn">â†’</button>
          </div>
          <div>
            <button type="button" class="arrow-btn" id="downBtn">â†“</button>
          </div>

          <button type="button" class="reset-btn" id="resetBtn">Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ</button>
        </div>

        <!-- Hidden download link -->
        <a id="downloadLink" download="Card.png" href="#" style="display:none;"></a>
      </div>
    </div>
  </div>

  <script>
    (() => {
      const canvas = document.getElementById("imageCanvas");
      const ctx = canvas.getContext("2d");
      const nameInput = document.getElementById("name");
      const downloadBtn = document.getElementById("downloadBtn");
      const downloadLink = document.getElementById("downloadLink");

      const upBtn = document.getElementById("upBtn");
      const downBtn = document.getElementById("downBtn");
      const leftBtn = document.getElementById("leftBtn");
      const rightBtn = document.getElementById("rightBtn");
      const resetBtn = document.getElementById("resetBtn");

      if (!canvas || !ctx || !nameInput || !downloadBtn || !downloadLink) return;

      // Keep page Arabic RTL
      document.documentElement.lang = "ar";
      document.documentElement.dir = "rtl";

      // Image size
      canvas.width = 2160;
      canvas.height = 3840;

      // âœ… Default name position on the red line (based on your card)
      const DEFAULT_X = 1080;  // center of 2160
      const DEFAULT_Y = 2210;  // on the red line (adjust with arrows if needed)

      let nameX = DEFAULT_X;
      let nameY = DEFAULT_Y;

      const STEP = 10;

      // âœ… Company colors for name: Dark Gray (and you can switch to gold if desired)
      const NAME_COLOR = "#2b2b2b";  // dark gray
      const FONT_FAMILY = "Tajawal, Arial, sans-serif";
      const FONT_WEIGHT = "700";

      // Background image (put your card image here)
      // âœ… Place your file at: images/card.png
      const bgImg = new Image();
      bgImg.crossOrigin = "anonymous";
      bgImg.src = "images/card.png";

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        if (bgImg.complete && bgImg.naturalWidth) {
          ctx.drawImage(bgImg, 0, 0, canvas.width, canvas.height);
        }

        const name = (nameInput.value || "").trim();
        if (!name) return;

        // base font size (auto-fit for long names)
        let fontSize = 92;
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.fillStyle = NAME_COLOR;
        ctx.font = `${FONT_WEIGHT} ${fontSize}px ${FONT_FAMILY}`;

        const maxWidth = canvas.width * 0.75;
        while (ctx.measureText(name).width > maxWidth && fontSize > 55) {
          fontSize -= 2;
          ctx.font = `${FONT_WEIGHT} ${fontSize}px ${FONT_FAMILY}`;
        }

        ctx.fillText(name, nameX, nameY);
      }

      function move(dx, dy) {
        nameX += dx;
        nameY += dy;
        draw();
      }

      function download() {
        draw();
        const dataUrl = canvas.toDataURL("image/png");

        const safeName = (nameInput.value || "name")
          .trim()
          .replace(/[^\w\u0600-\u06FF\u00C0-\u017F\s-]/g, "")
          .replace(/\s+/g, "_");

        downloadLink.href = dataUrl;
        downloadLink.download = `FantasyEye_${safeName}.png`;
        downloadLink.click();
      }

      // Mobile-safe binding
      function bindPress(el, fn) {
        if (!el) return;
        el.addEventListener("click", (e) => { e.preventDefault(); fn(); }, { passive: false });
        el.addEventListener("touchstart", (e) => { e.preventDefault(); fn(); }, { passive: false });
      }

      bindPress(upBtn, () => move(0, -STEP));
      bindPress(downBtn, () => move(0, STEP));
      bindPress(leftBtn, () => move(-STEP, 0));
      bindPress(rightBtn, () => move(STEP, 0));

      bindPress(resetBtn, () => {
        nameX = DEFAULT_X;
        nameY = DEFAULT_Y;
        draw();
      });

      nameInput.addEventListener("input", draw);
      downloadBtn.addEventListener("click", download);

      bgImg.onload = draw;
    })();
  </script>
</body>
</html>






